{% extends 'base.html' %}
{% block content %}

<section class="min-h-screen flex items-center justify-center px-4 py-24 mx-auto max-w-7xl bg-base-200">
  <div class="w-full md:w-3/5 lg:w-2/5">
    <h1 class="mb-6 text-3xl md:text-4xl font-bold text-center">
      Create Your Free Account
    </h1>
    <p class="mb-6 text-sm text-center text-base-content/70">
      Already have an account?
      <a href="{% url 'account_login' %}" class="link link-primary">Sign In</a>
    </p>
    
    <form class="mt-8 space-y-6" action="{% url 'account_signup' %}" method="post" autocomplete="off">
      {% csrf_token %}
      {% if form.non_field_errors %}
        <div class="text-error text-sm">{{ form.non_field_errors }}</div>
      {% endif %}
      
      <div class="form-control">
        <label class="label" for="username">
          <span class="label-text">Username</span>
        </label>
        <input 
          class="input input-bordered w-full" 
          type="text" 
          id="username" 
          name="username" 
          placeholder="Username" 
          hx-get="{% url 'check_username' %}?username={{ login.value }}"
          hx-trigger="keyup changed delay:500ms"
          hx-target="#username-feedback"
          hx-swap="innerHTML" 
          required 
        />
        <div id="username-feedback" class="text-sm mt-1"></div>
        {% if form.login.errors %}
          <div class="text-error text-sm mt-1">{{ form.login.errors }}</div>
        {% endif %}
      </div>
      
      <div class="form-control">
        <label class="label" for="email">
          <span class="label-text">Your Email</span>
        </label>
        <input 
          class="input input-bordered w-full" 
          type="email" 
          name="email" 
          id="email" 
          placeholder="Ex. james@bond.com" 
          inputmode="email" 
          required 
        />
        {% if form.email.errors %}
          <div class="text-error text-sm mt-1">{{ form.email.errors }}</div>
        {% endif %}
      </div>

      <div class="form-control">
        <label class="label" for="password1">
          <span class="label-text">Create a Password</span>
        </label>
        <input 
          class="input input-bordered w-full" 
          type="password" 
          id="password1" 
          name="password1" 
          placeholder="••••••••" 
          required 
        />
        {% if form.password1.errors %}
          <div class="text-error text-sm mt-1">{{ form.password1.errors }}</div>
        {% endif %}
      </div>

      <div class="form-control">
        <label class="label" for="password2">
          <span class="label-text">Repeat Password</span>
        </label>
        <input 
          class="input input-bordered w-full" 
          type="password" 
          id="password2" 
          name="password2" 
          placeholder="••••••••" 
          required 
        />
        {% if form.password2.errors %}
          <div class="text-error text-sm mt-1">{{ form.password2.errors }}</div>
        {% endif %}
      </div>
      
      <button 
        type="submit" 
        class="btn btn-primary w-full"
      >
        Sign Up
      </button>
    </form>

    <p class="mt-6 text-sm text-center text-base-content/70">
      By clicking "Sign Up" you agree to our
      <a href="#" class="link link-primary">Terms of Service</a>
      and
      <a href="#" class="link link-primary">Privacy Policy</a>.
    </p>
  </div>
</section>

{% endblock %}